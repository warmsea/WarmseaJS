/*!
 * warmsea JavaScript Library v0.3.0-alpha.3
 *
 * Copyright 2009, 2014 Su Su
 * Released under the MIT license
 *
 * Date: 2014-03-15
 */
!function(a){"use strict";var b=function(){},c=b;c.noop=function(){},c.identity=function(a){return a},c.unimplemented=function(){var a="Unimplemented function.";if(!c.isFunction(c.error))throw new Error(a);c.error(a)},c.error=function(a){throw new Error(a)},c.cmp=function(a,b){return a>b?1:b>a?-1:0},c.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},c.values=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},c.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=0,e=Math.max(Math.ceil((b-a)/c),0),f=new Array(e);e>d;)f[d++]=a,a+=c;return f},c.sort=function(a,b){b=b||c.cmp;var d,e=a.length;for(d=0;e>d;++d)a[d]._wssi=d;for(a.sort(function(a,c){return b(a,c)||a._wssi-c._wssi}),d=0;e>d;++d)delete a[d]._wssi;return a},c.min=function(){if(!arguments.length)return void 0;var a,b;if(c.isFunction(arguments[0])?(a=arguments[0],b=Array.prototype.slice.call(arguments,1)):(a=c.cmp,b=Array.prototype.slice.call(arguments,0)),!b.length)return void 0;for(var d=c.isArray(b[0])?b[0]:b,e=d[0],f=1,g=d.length;g>f;++f)a(e,d[f])>0&&(e=d[f]);return e},c.max=function(){if(!arguments.length)return void 0;var a,b;if(c.isFunction(arguments[0])?(a=arguments[0],b=Array.prototype.slice.call(arguments,1)):(a=c.cmp,b=Array.prototype.slice.call(arguments,0)),!b.length)return void 0;for(var d=c.isArray(b[0])?b[0]:b,e=d[0],f=1,g=d.length;g>f;++f)a(e,d[f])<0&&(e=d[f]);return e},c.bool=function(a){var b=a;return c.isObject(b)&&"__bool__"in b?c.bool(c.isFunction(b.__bool__)?b.__bool__():b.__bool__):!!a},c.i=function(a,b){var d=a;return d===!0?1:c.isObject(d)&&"__int__"in d?c.i(c.isFunction(d.__int__)?d.__int__():d.__int__,b):b||!c.isString(d)||0!==d.indexOf("0x")&&0!==d.indexOf("0X")?b&&10!==b?parseInt(d,b):Math.round(parseFloat(d)):parseInt(d,16)},c.f=function(a){var b=a;return b===!0?1:c.isObject(b)&&"__float__"in b?c.f(c.isFunction(b.__float__)?b.__float__():b.__float__):parseFloat(b)},c.str=function(a){var b=a;return c.isObject(b)&&"__str__"in b?c.str(c.isFunction(b.__str__)?b.__str__():b.__str__):String(a)},c.array=function(a){return c.isArray(a)?a:void 0===a||null===a?[]:[a]},c.isNumber=function(a){return"number"==typeof a},c.isString=function(a){return"string"==typeof a},c.isArray=function(a){return a instanceof Array},c.isFunction=function(a){return"function"==typeof a},c.isPlainObject=function(a){if("[object Object]"!==String(a))return!1;try{if(!a.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(b){return!1}return!0},c.isObject=function(a){return null!==a&&"object"==typeof a},c.pad=function(a,b,d){a=c.str(a),b=c.max(0,void 0===b?2:b,a.length),d=c.str(d||"0");var e=new Array(Math.ceil((b-a.length)/d.length)+1);return e.join(d).substring(0,b-a.length)+a},c.format=function(a){if(!arguments.length)return"";a=d(arguments[0]);var b;b=c.isArray(arguments[1])?arguments[1]:c.isPlainObject(arguments[1])?arguments[1]:Array.prototype.slice.call(arguments,1);var f=new e(b),g=/%(?:\((.*?)\))?([#|0|\-| |\+]+)?(\d+|\*)?(?:.(\d+|\*))?(?:[h|l|L])?(.)?/g;return a=a.replace(g,function(){return e.prototype.convert.apply(f,arguments)})};var d=function(a){if(c.isString(a))return a;if(!c.isFunction(a))return c.str(a);for(var b,d,e,f=c.str(a).split(/\r?\n/),g=0,h=0,i=f.length,j={},k=null;i>g;){var l=f[g++].match(/^[ \t]*\/\*<<<(\w+)(?:;(.+)?)?$/);if(l){b=g,e=l[1];var m=(l[2]||"").split(/[ \t]*,[ \t]*/);for(h=0;h<m.length;++h){var n=m[h].toLowerCase().split(/-(.*)/);n[0]&&(j[n[0]]=n[1]||!0)}break}}b||c.error("Format failed: start line missing"),j.ws=j.ws||"outdent";for(var o=[];i>g;){var p=f[g];if(p.match(new RegExp("^[ \\t]*"+e+"\\*\\/"))){d=g;break}if(g++,"outdent"===j.ws){var q=p.match(/^([ \t]*).*$/),r=q[1];if(null===k)k=r;else{for(h=0;h<k.length&&h<r.length&&k[h]===r[h];)h++;k.length>h&&(k=k.substring(0,h))}}o.push(p)}d||c.error("Format failed: end line missing");var s;switch(j.ws){case"outdent":s=function(a){return a.substring(k.length)};break;case"keep":s=c.identity;break;case"trim":s=function(a){return a.trim()};break;default:c.error("Format failed: Unsupported WS option")}for(g=0,i=o.length;i>g;++g)o[g]=s(o[g]);return o.join("\n")},e=function(a){this.params=a||[],this.index=0};e.prototype.convert=function(a,b,d,e,f,g,h){void 0===g&&c.error('format incomplete specifier "%s" in position (%d).',a,h),this.convertors.hasOwnProperty(g)||c.error('format unsupported type "%s" in position (%d)',g,h);var i;if("*"===e&&(i=this.index++,this.params.hasOwnProperty(i)||c.error('format key error "%s" in position (%d).',b,h),e=this.params[i]),e=e||0,"*"===f&&(i=this.index++,this.params.hasOwnProperty(i)||c.error('format key error "%s" in position (%d).',b,h),f=this.params[i]),void 0===f&&(f=6),"%"===g||"/"===g)return g;b=void 0===b?this.index++:b,this.params.hasOwnProperty(b)||c.error('format key error "%s" in position (%d).',b,h);var j=this.params[b];return d=d||"",d={"#":d.indexOf("#")>=0,0:d.indexOf("0")>=0&&d.indexOf("-")<0,"-":d.indexOf("-")>=0," ":d.indexOf(" ")>=0&&d.indexOf("+")<0,"+":d.indexOf("+")>=0},this.convertors[g](j,d,e,f)},e.prototype.convertors={d:function(a,b,c){return e.prototype.convertors.int("d",a,b,c)},o:function(a,b,c){return e.prototype.convertors.int("o",a,b,c)},x:function(a,b,c){return e.prototype.convertors.int("x",a,b,c)},X:function(a,b,c){return e.prototype.convertors.int("X",a,b,c)},f:function(a,b,d,e){a=c.f(a);var f=0>a?"-":b["+"]?"+":b[" "]?" ":"";a=Math.abs(a).toFixed(e),b["#"]&&0===e&&(a+=".");var g=c.max(0,d-a.length-f.length);return b["-"]?f+a+c.pad("",g," "):b[0]?f+c.pad("",g,"0")+a:c.pad("",g," ")+f+a},s:function(a,b,d){a=c.str(a);var e=c.max(0,d-a.length);return b["-"]?a+c.pad("",e," "):c.pad("",e," ")+a},"%":function(){return this.index--,"%"},"/":function(){return this.index--,"/"},"int":function(a,b,d,e){b=c.i(b);var f=0>b?"-":d["+"]?"+":d[" "]?" ":"",g=d["#"]?{d:"",o:"0",x:"0x",X:"0X"}[a]:"";b=Math.abs(b).toString({d:10,o:8,x:16,X:16}[a]);var h=c.max(0,e-g.length-b.length-f.length),i="";return i=d["-"]?f+g+b+c.pad("",h," "):d[0]?f+g+c.pad("",h,"0")+b:c.pad("",h," ")+f+g+b,"X"===a&&(i=i.toUpperCase()),i}},"function"==typeof define&&define.amd?define(function(){return b}):a.warmsea=b}(this);